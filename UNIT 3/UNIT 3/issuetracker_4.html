<!DOCTYPE html>
<html>
  <head>
    <title>Try it yourself: Issue Tracker</title>
    <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone@7/babel.min.js"></script>
  </head>
  <body>
    <div id="contents"></div>
    <script type="text/babel">
      const sampleIssue = {
        id: 1,
        status: "New",
        owner: "John",
        effort: 5,
        created: new Date("2021-10-08"),
        due: new Date("2021-10-09"),
        title: "Error in console when adding",
      };

      class IssueFilter extends React.Component {
        render() {
          return <div>This is a placeholder for the issue filter.</div>;
        }
      }

      class IssueRow extends React.Component {
        render() {
          const issue = this.props.issue;
          return (
            <tr>
              <td>{issue.id}</td>
              <td>{issue.status}</td>
              <td>{issue.owner}</td>
              <td>{issue.created.toDateString()}</td>
              <td>{issue.effort}</td>
              <td>{issue.due ? issue.due.toDateString() : ""}</td>
              <td>{issue.title}</td>
            </tr>
          );
        }
      }

      class IssueTable extends React.Component {
        constructor() {
          super();
          this.state = { issues: [] };
        }
        componentDidMount() {
          this.createIssue(sampleIssue);
        }

        createIssue(issue) {
          issue.id = this.state.issues.length + 1;
          issue.created = new Date();
          const newIssueList = this.state.issues.slice();
          newIssueList.push(issue);
          this.setState({ issues: newIssueList });
        }
        changeIssue() {
          const changedIssue = [
            {
              id: 1,
              status: "Completed",
              owner: "John",
              effort: 5,
              created: new Date("2021-10-08"),
              due: new Date("2021-10-09"),
              title: "Error in console when adding",
            },
          ];

          this.setState({ issues: changedIssue });
        }

        render() {
          const issueRows = this.state.issues.map((issue) => <IssueRow key={issue.id} issue={issue} />);

          return (
            <div>
              <table className="bordered-table">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Status</th>
                    <th>Owner</th>
                    <th>Created</th>
                    <th>Effort</th>
                    <th>Due Date</th>
                    <th>Title</th>
                  </tr>
                </thead>
                <tbody>{issueRows}</tbody>
              </table>
              <button onClick={() => this.changeIssue()}>Change </button>
            </div>
          );
        }
      }

      class IssueAdd extends React.Component {
        render() {
          return <div>This is a placeholder for a form to add an issue.</div>;
        }
      }

      class IssueList extends React.Component {
        render() {
          return (
            <React.Fragment>
              <h1>Issue Tracker</h1>
              <IssueFilter />
              <hr />
              <IssueTable />
              <hr />
              <IssueAdd />
            </React.Fragment>
          );
        }
      }

      const element = <IssueList />;

      ReactDOM.render(element, document.getElementById("contents"));
    </script>
  </body>
</html>
